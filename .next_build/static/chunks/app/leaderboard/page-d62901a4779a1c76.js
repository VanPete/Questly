(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[410],{2525:(e,s,t)=>{"use strict";t.d(s,{default:()=>n});var a=t(5155),l=t(2115);async function i(e){let s=e?"?date=".concat(encodeURIComponent(e)):"",t=new Date().toISOString().slice(0,10);if(e&&e!==t){let t=await fetch("/api/leaderboard/daily-snapshot".concat(s));return t.ok?t.json():{date:e,results:[]}}let a=await fetch("/api/leaderboard/daily".concat(s));return a.ok?a.json():{date:e||t,results:[]}}async function r(){let e=await fetch("/api/leaderboard/lifetime");return 403===e.status?{premiumRequired:!0}:e.ok?e.json():{results:[]}}function n(){var e;let s=new Date().toISOString().slice(0,10),t=Array.from({length:30},(e,s)=>{let t=new Date;return t.setDate(t.getDate()-s),t.toISOString().slice(0,10)}),[n,c]=(0,l.useState)(s),[d,m]=(0,l.useState)({date:s,results:[]}),[x,o]=(0,l.useState)({results:[]}),[u,h]=(0,l.useState)({current:[],alltime:[]});return(0,l.useEffect)(()=>{i(n).then(m)},[n]),(0,l.useEffect)(()=>{r().then(o)},[]),(0,l.useEffect)(()=>{!async function(){let e=await fetch("/api/leaderboard/streaks");if(!e.ok)return h({current:[],alltime:[]});h(await e.json())}()},[]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold mb-4",children:"Daily Leaderboard"}),(0,a.jsxs)("div",{className:"mb-2 flex items-center gap-2",children:[(0,a.jsx)("span",{className:"opacity-80",children:d.date}),(0,a.jsx)("label",{htmlFor:"date-picker",className:"sr-only",children:"Leaderboard date"}),(0,a.jsx)("select",{id:"date-picker",value:n,onChange:e=>c(e.target.value),className:"border rounded px-2 py-1 text-sm",children:t.map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]}),0===d.results.length?(0,a.jsx)("p",{className:"opacity-70",children:"No results yet. Come back after todayâ€™s quests!"}):(0,a.jsx)("ul",{className:"divide-y",children:d.results.map(e=>(0,a.jsxs)("li",{className:"py-2 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"w-6 text-right",children:e.rank}),(0,a.jsx)("span",{className:"text-sm opacity-80",children:e.name||e.user_id.slice(0,8)})]}),(0,a.jsxs)("div",{className:"text-sm",children:[e.points," pts"]})]},e.user_id))}),(0,a.jsx)("h2",{className:"text-xl font-semibold mt-8 mb-2",children:"Lifetime Leaderboard"}),"premiumRequired"in x?(0,a.jsxs)("p",{className:"opacity-80 text-sm",children:["Premium required to view lifetime rankings. ",(0,a.jsx)("a",{href:"/upgrade",className:"underline",children:"Upgrade"})]}):(null==(e=x.results)?void 0:e.length)?(0,a.jsx)("ul",{className:"divide-y",children:x.results.map(e=>(0,a.jsxs)("li",{className:"py-2 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"w-6 text-right",children:e.rank}),(0,a.jsx)("span",{className:"text-sm opacity-80",children:e.name||e.user_id.slice(0,8)})]}),(0,a.jsxs)("div",{className:"text-sm",children:[e.points," pts"]})]},e.user_id))}):(0,a.jsx)("p",{className:"opacity-70 text-sm",children:"No lifetime results yet."}),(0,a.jsx)("h2",{className:"text-xl font-semibold mt-8 mb-2",children:"Streaks"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-semibold mb-1",children:"Current Streaks"}),(0,a.jsxs)("ul",{className:"divide-y",children:[0===u.current.length&&(0,a.jsx)("li",{className:"text-sm opacity-70",children:"No data yet."}),u.current.map(e=>(0,a.jsxs)("li",{className:"py-2 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"w-6 text-right",children:e.rank}),(0,a.jsx)("span",{className:"text-sm opacity-80",children:e.name||e.user_id.slice(0,8)})]}),(0,a.jsxs)("div",{className:"text-sm",children:["\uD83D\uDD25 ",e.streak]})]},e.user_id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-semibold mb-1",children:"All-Time Longest Streaks"}),(0,a.jsxs)("ul",{className:"divide-y",children:[0===u.alltime.length&&(0,a.jsx)("li",{className:"text-sm opacity-70",children:"No data yet."}),u.alltime.map(e=>(0,a.jsxs)("li",{className:"py-2 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"w-6 text-right",children:e.rank}),(0,a.jsx)("span",{className:"text-sm opacity-80",children:e.name||e.user_id.slice(0,8)})]}),(0,a.jsxs)("div",{className:"text-sm",children:["\uD83D\uDD25 ",e.longest_streak]})]},e.user_id))]})]})]})]})}},5749:(e,s,t)=>{Promise.resolve().then(t.bind(t,2525))}},e=>{e.O(0,[441,493,358],()=>e(e.s=5749)),_N_E=e.O()}]);