(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{1290:()=>{},3038:(e,t,r)=>{"use strict";r.d(t,{default:()=>l});var s=r(5155),n=r(2115);class l extends n.Component{static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e,t){console.error("UI error:",e,t)}render(){return this.state.hasError?(0,s.jsxs)("div",{className:"text-center py-10",children:[(0,s.jsx)("div",{className:"mb-2",children:"⚠️ Something went wrong."}),(0,s.jsx)("button",{className:"border rounded-xl px-3 py-2",onClick:()=>location.reload(),children:"Retry"})]}):this.props.children}constructor(...e){super(...e),this.state={hasError:!1}}}},6174:(e,t,r)=>{"use strict";r.d(t,{D:()=>a,ThemeProvider:()=>i});var s=r(5155),n=r(2115);let l=(0,n.createContext)({theme:"light",setTheme:()=>{}});function i(e){let{children:t}=e,[r,i]=(0,n.useState)("light");return(0,n.useEffect)(()=>{let e=localStorage.getItem("theme");if("dark"===e||"light"===e)i(e),document.documentElement.classList.toggle("dark","dark"===e);else{let e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;i(e?"dark":"light"),document.documentElement.classList.toggle("dark",e)}},[]),(0,s.jsx)(l.Provider,{value:{theme:r,setTheme:e=>{i(e),localStorage.setItem("theme",e),document.documentElement.classList.toggle("dark","dark"===e)}},children:t})}function a(){return(0,n.useContext)(l)}},6767:(e,t,r)=>{"use strict";r.d(t,{default:()=>m});var s=r(5155),n=r(1026),l=r(2115),i=r(6910),a=r(2619),o=r.n(a);function d(){let e=function(){let[e,t]=(0,l.useState)(null);return(0,l.useEffect)(()=>{let e=!0;i.N.auth.getUser().then(r=>{let{data:s}=r;e&&t(s.user?{id:s.user.id,email:s.user.email}:null)});let{data:r}=i.N.auth.onAuthStateChange((e,r)=>{t((null==r?void 0:r.user)?{id:r.user.id,email:r.user.email}:null)});return()=>{e=!1,r.subscription.unsubscribe()}},[]),e}();return e?(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-xs opacity-70 max-w-[160px] truncate",children:e.email}),(0,s.jsx)("button",{onClick:()=>i.N.auth.signOut(),className:"text-sm underline underline-offset-4",children:"Sign out"})]}):(0,s.jsx)(o(),{href:"/login",className:"text-sm underline underline-offset-4",children:"Sign in"})}var c=r(6174);let u=e=>fetch(e).then(e=>e.json());function m(){var e,t;let{data:r}=(0,n.Ay)("/api/profile",u,{suspense:!1}),l=null!=(t=null==r||null==(e=r.profile)?void 0:e.streak_count)?t:0,{theme:i,setTheme:a}=(0,c.D)();return(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("button",{"aria-label":"Toggle dark mode",className:"rounded-full border px-2 py-1 text-xs bg-neutral-100 dark:bg-neutral-800 hover:bg-neutral-200 dark:hover:bg-neutral-700 transition",onClick:()=>a("dark"===i?"light":"dark"),title:"dark"===i?"Switch to light mode":"Switch to dark mode",children:"dark"===i?"\uD83C\uDF19":"☀️"}),(0,s.jsx)("p",{className:"text-sm opacity-70 hidden sm:block",children:"Learn something fun today"}),(0,s.jsxs)("span",{className:"hidden sm:inline-flex items-center gap-1 rounded-full border px-2 py-1 text-xs opacity-80",title:"Complete at least 1 Quest today to keep your streak alive!",children:["\uD83D\uDD25 Streak ",l]}),(0,s.jsx)(o(),{href:"/profile",className:"text-sm underline hidden sm:block",children:"Profile"}),(0,s.jsx)(d,{})]})}},6910:(e,t,r)=>{"use strict";r.d(t,{N:()=>s});let s=(0,r(5040).UU)("https://ilkwgbtgmlcdtahzfpme.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imlsa3dnYnRnbWxjZHRhaHpmcG1lIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYwNjAxMzAsImV4cCI6MjA3MTYzNjEzMH0.2N7u0d3P9upU3a1p2PoJzQp_tqLpm-JCTo_L7ZuTioo")},9115:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,1290,23)),Promise.resolve().then(r.bind(r,3038)),Promise.resolve().then(r.bind(r,6767)),Promise.resolve().then(r.bind(r,6174)),Promise.resolve().then(r.bind(r,7025)),Promise.resolve().then(r.t.bind(r,2619,23))}},e=>{e.O(0,[741,619,40,978,441,493,358],()=>e(e.s=9115)),_N_E=e.O()}]);